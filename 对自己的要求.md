不要只是完成任务，还要如何更好的完成任务

web开发就是这样子，经常要修改需求，网站在本地开发好后，长传到服务器上后，经常会因为需求或者修复BUG 要改，为了速度都会到服务器上直接改代码。
这样就会造成一个现象，本地的代码和服务器的代码不一样了，都是以线上的代码为准，本地的代码相当于没用了。

目前自己的开发模式是这样的--
本地建立项目（框架，代码，数据库）--开发好功能--打包成zip--上传到服务器上---遇到BUG或改需求，直接在服务器上面修改。***这样的缺点就是一旦修改了服务器上的代码，本地的就要跟着修改，修改多了就懒得动本地的，这时就需要将服务器上面的代码再打包回本地。挺浪费时间的。不过改需求，解决BUG的时候，时间是非常紧的。可以牺牲掉打包回本地的时间。这样又觉得很乱。线上改代码没法用到IDE的功能，开发新功能的时候很慢很慢。***

很无语这样子，有什么方案来解决呢亲？

给自己定义一套标准的开发流程 -- 目标是要解决本地代码和服务器代码同步的问题

- 避免BUG，这个就要本地测试好，用标准的测试方案来测试--何为标准？
- 增加功能或改需求，尽量避免在服务器上直接修改代码。
- 快速同步本地和服务器上的代码。全量，增量，部分修改

0.确定需求，比如要模仿站点--*显示图片*列表*首页*异步加载等功能
1.在远程项目仓库（github,公司内部自建，公司云服务器自建，码云等第三方托管）建立项目空仓。
2.本地IDE建立远程git项目，选择框架并从框架仓库克隆到本地，实现hello world 
2.建立忽略文件配置。如框架文件，数据库配置文件，应用配置文件
3.开发功能
4.用标准流程来测试功能
5.完成功能得到子模块，模块测试
5.提交代码到git仓库，推送到远程git仓库

6.生产环境克隆代码到线上运行，线上增加忽略文件，拉取框架，配置数据库链接，app配置等

然后我们在应急的时候直接在线上的代码修改时，要提交到远程仓库里。

本地的代码每次要开发前都需要先拉取远程代码。


现在开始迁移线上代码。统一采用tp5框架重构

线上完整代码要设置一个备份定时器来定期备份

======以上完成了从开发到部署的流程==


数据分析
cnzz 百度统计

生产服务器管理  
1.用户管理 root 与 平时登陆用户  ， 软件运行用户 权限
为运维，前端，后端创建用户，隔离权限
2.软件包，yum，更改yum软件源
3.web运行环境，nginx  php mysql 
4.管理工具  nload  htop git composer jre

==== 
具体执行步骤：
租用服务器
ssh以root，22端口链接到服务器
从第一条命令开始
---服务器初始化 -- 
1.centOS 备份软件源 下载新的yum源，具体步骤 在阿里云网站有http://mirrors.aliyun.com/help/centos
命令：
mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup   备份
wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo 下载新的CentOS-Base.repo 到/etc/yum.repos.d/
yum clean all
yum makecache    生成缓存
yum update 升级原系统的软件

针对yum软件源软件版本低的问题解决方案有-1.到官方网站下载rpm包安装，或到官方网站下载源码，自己编译安装。或更换添加第三方软件源
2.更换root密码
命令：
passwd 新密码

3.在日常的服务器管理过程中，您并不需要使用root来登录。最佳实践是创建一个拥有一定权限的普通用户进行日常的操作与维护。
添加非ROOT用户 useradd -d /usr/用户名 -m 用户名
修改密码 passwd 用户名
赋予用户权限  vim /etc/sudoers  找到root 行 增加 用户root权限
重新用用户名链接服务器

命令：
# 创建一个名为chris的用户
adduser chris
# 给chris创建登录密码
passwd chris
# 通过编辑sudoers文件给chris赋权
visudo

这个命令使用vi打开了sudoers文件，我们可以通过vi来对这个文件进行编辑。在sudoers的最后一行加入：
chris    ALL=(ALL)       ALL

4.禁用root直接登录

vi /etc/ssh/sshd_config #编辑

找到PermitRootLogin，将后面的yes改为no

:wq! #保存退出

5.更改ssh默认端口、禁止root登录
我们可以对ssh服务进行配置，通过修改ssh服务的默认监端口址、禁止root登录等手段，加强云主机的安全性。我们使用刚刚创建的chris账号登录云主机，登录后执行：

vi /etc/ssh/sshd_config
在打开的配置文件末尾输入以下内容，其中Port您可以自行设置：

Port 10022
Protocol 2
PermitRootLogin no
保存后退出，然后reload ssh服务，使配置生效：

service sshd reload
当再次登录云主机时，您需要在配置文件中指定的Port参数：

ssh -p 10022 chris@211.155.92.230


6.安装web运行环境，配置环境变量
查看默认安装  rpm -qa| grep 软件名
采用到官方网站最新源码包，自己编译
不过这个有个缺点就是要解决软件依赖问题。
解决方案：事先将要依赖的文件整理出来，然后编译安装完，再安装最后的软件。
比如说安装nginx，需要的依赖包有pcre openssl等，或者说要开启这些模块，要安装这些依赖。然后将这些先安装好，最后再安装nginx。
